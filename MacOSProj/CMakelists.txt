project(ModbusDemo C CXX)
cmake_minimum_required(VERSION 3.3.2)

include(cmake/App.cmake)
set(SOURCES "src/test.cpp"
		"src/MyApp.cpp")

add_executable(${PROJECT_NAME}
		WIN32
		${SOURCES}
)
set_target_properties(${CMAKE_PROJECT_NAME} PROPERTIES LINK_FLAGS "/ENTRY:mainCRTStartup")
set(ASSETS_PATH "$<TARGET_FILE_DIR:${CMAKE_PROJECT_NAME}>/assets") 
add_custom_command(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${ULTRA_BIN}" $<TARGET_FILE_DIR:${CMAKE_PROJECT_NAME}>) 
add_custom_command(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${MODBUS_BIN}" $<TARGET_FILE_DIR:${CMAKE_PROJECT_NAME}>) 
add_custom_command(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${CMAKE_CURRENT_SOURCE_DIR}/assets/" "${ASSETS_PATH}")
add_custom_command(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${ULTRA_RSC_DIR}" "${ASSETS_PATH}/resources")
include_directories(${MODBUS_INCLUDES} ${ULTRA_INCLUDES})
target_link_libraries(ModbusDemo PUBLIC modbus PUBLIC UltralightCore PUBLIC AppCore PUBLIC Ultralight PUBLIC WebCore)